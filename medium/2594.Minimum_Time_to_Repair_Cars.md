# 2594. Minimum Time to Repair Cars

Link: https://leetcode.com/problems/minimum-time-to-repair-cars/
Tags: Array, Binary Search
Difficulty: Medium

## 題目解釋
給你一個整數陣列 `ranks` ，表示一些機械工的能力值。`ranks[i]` 是第 `i` 位機械工的能力值。能力值為 `r` 的機械工修好 `n` 輛車需要 `r * n^2` 分鐘。
給你一個整數 `cars` ，表示需要修理的汽車數目。
請你返回修理所有汽車 **最少** 需要多少時間。
注意：所有機械工可以同時進行修理。

## 限制與條件
- `1 <= ranks.length <= 10^5`
- `1 <= ranks[i] <= 100`
- `1 <= cars <= 10^6`

## 解法思路
### 思考過程
這是一個典型的「最小化最大值」問題，可以使用 **二分搜尋法** (Binary Search on Answer) 來解決。
具有單調性：如果所有的機械工能在 `T` 分鐘內修完 `cars` 輛車，那麼對於任何 `T' > T`，他們也能修完。
我們二分搜尋「需要的時間」。
- 下界 `left = 1`。
- 上界 `right`：假設只有一個能力值最好的機械工（`min_rank`）修所有的車，時間為 `min_rank * cars * cars`。
- 對於每個中間值 `mid` (假設的時間)，我們計算在這個時間內，所有機械工總共能修多少輛車。
    - 對於第 `i` 個機械工，他在時間 `mid` 內能修的車數滿足 `r * n^2 <= mid` => `n <= sqrt(mid / r)`。
- 如果總產量 `>= cars`，說明時間充裕，嘗試尋找更小的時間 (`right = mid`)。
- 否則，需要更多時間 (`left = mid + 1`)。

### 解法：Binary Search on Answer
> [!IMPORTANT]
> 思路：二分枚舉時間，檢查該時間內總產量是否達標。

### 複雜度分析
| 維度 | 複雜度 | 說明 |
| --- | --- | --- |
| 時間複雜度 | O(n log M) | n 是機械工數量，M 是搜索範圍的大小。每輪檢查需要遍歷所有機械工。 |
| 空間複雜度 | O(1) | 僅使用常數空間。 |

```cpp
class Solution {
    public:
        long long repairCars(vector<int>& ranks, int cars) {
            long long left=1, min_rank=200;
            long long right, mid;
            for(int i=0; i<ranks.size(); i++){
                if(min_rank>ranks[i])
                    min_rank = ranks[i];
            }
            right = (long long)min_rank*cars*cars;

            while(left<right){
                mid = (left+right)/2;
                if(repairAll(ranks, cars, mid)){
                    right=mid;
                }
                else{
                    left=mid+1;
                }
            }
            return right;
        }
    
        bool repairAll(vector<int>& ranks, int cars, long long time){
            int finished_car=0;
            for(int i=0; i<ranks.size(); i++){
                long long tmp = time/ranks[i];
                long long ranked_car = sqrt(tmp);
                finished_car += ranked_car;
                if(finished_car>=cars)
                    return true;
            }
            
            return false;
        }
    };
```
