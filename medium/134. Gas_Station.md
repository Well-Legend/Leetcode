# 134. Gas Station

**Link**: https://leetcode.com/problems/gas-station/  
**Tags**: Array, Greedy  
**Difficulty**: Medium

## 題目解釋
在一個圓形路線上有 `n` 個加油站，其中第 `i` 個加油站有汽油 `gas[i]` 升。  
你有一輛油箱容量無限的汽車，從第 `i` 個加油站開往第 `i+1` 個加油站需要消耗汽油 `cost[i]` 升。你從其中一個加油站出發，開始時油箱為空。  
給定兩個整數陣列 `gas` 和 `cost` ，如果你可以繞環路行駛一周，則返回出發時加油站的編號，否則返回 `-1` 。如果存在解，則保證它是 **唯一** 的。  

## 限制與條件
- `gas.length == n`
- `cost.length == n`
- `1 <= n <= 10^5`
- `0 <= gas[i], cost[i] <= 10^4`

## 解法思路
### 思考過程
這是一個經典的貪婪問題。  
我們可以觀察到兩個具體的性質：  
1. **全局檢測**：如果所有加油站的總油量 `total_gas` 小於總消耗量 `total_cost`，那麼無論從哪裡出發，都不可能跑完一圈。反之，如果 `total_gas >= total_cost`，那麼一定存在一個起點能跑完一圈（這是可以數學證明的）。  
2. **局部貪婪**：假設我們從 `start` 出發，累積的油量 `surplus` 在到達第 `i` 站時變成負數（即無法到達 `i+1`），那麼從 `start` 到 `i` 之間的任何一站作為起點，都不可能到達 `i+1`（因為中間任何一點出發的油量只會比從 `start` 出發累積到該點的油量更少或相等）。因此，唯一的選擇是將起點重新設為 `i+1`，並重置 `surplus`。  

代碼實現：  
- 遍歷所有加油站，計算總剩餘油量 `total_surplus` 和當前累積油量 `surplus`。  
- 如果 `surplus < 0`，說明目前的起點 `start` 行不通，我們將起點重置為 `i + 1`，並將 `surplus` 歸零。  
- 最後，如果 `total_surplus < 0`，返回 -1；否則返回我們找到的 `start`。  

### 解法：Greedy (One Pass)
> [!IMPORTANT]
> 思路：如果總油量不足，直接失敗。否則，遍歷過程中只要累積油量 < 0，就將起點重置為下一個站點。

### 複雜度分析
| 維度 | 複雜度 | 說明 |
| --- | --- | --- |
| 時間複雜度 | O(n) | 只需要遍歷陣列一次。 |
| 空間複雜度 | O(1) | 僅使用常數變數。 |

```cpp
class Solution {
public:
    int canCompleteCircuit(vector<int>& gas, vector<int>& cost) {
        int n = gas.size();
        int total_surplus = 0;
        int surplus = 0;
        int start = 0;
        
        for(int i = 0; i < n; i++){
            total_surplus += gas[i] - cost[i];
            surplus += gas[i] - cost[i];
            if(surplus < 0){
                surplus = 0;
                start = i + 1;
            }
        }
        return (total_surplus < 0) ? -1 : start;
    }
};
```
